(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d6eb9ba"],{"09e5":function(e,t,a){"use strict";a("7955")},7675:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"regular-tables",fluid:"",tag:"section"}},[a("v-card",[a("v-card-title",[e._v(" العملاء "),a("v-spacer"),a("v-spacer"),e.permissions.add?a("router-link",{attrs:{to:{path:"/customerForm"},color:"blue"}},[a("v-btn",{staticClass:"mx-2",attrs:{color:"blue"}},[e._v(" اضافة عميل + ")])],1):e._e()],1),a("v-data-table",{staticClass:"custom_table_class mt-8",attrs:{loading:e.dataLoading,headers:e.headers,search:e.search,items:e.items,"items-per-page":20,"footer-props":{"items-per-page-options":[5,10,20,40,50]},options:e.options,"server-items-length":e.total,"page-count":e.numberOfPages},on:{"update:options":function(t){e.options=t},fetchAllItems:e.fetchAllItems},scopedSlots:e._u([{key:"item.color_e",fn:function(t){var s=t.item;return[a("p",{staticClass:"color_primary"},[e._v(" "+e._s(s.color_e)+" ")])]}},e.permissions.update||e.permissions.read||e.permissions.remove?{key:"item.actions",fn:function(t){var s=t.item;return[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,r=t.attrs;return[a("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{medium:"",color:"primary"}},"v-icon",r,!1),s),[e._v(" mdi-dots-vertical ")])]}}],null,!0)},[a("v-list",[e.permissions.update||e.permissions.read?a("v-list-item",{attrs:{to:"/customerForm/"+s.id}},[a("v-icon",{staticClass:"ml-2"},[e._v(" mdi-pencil ")]),e._v(" تعديل ")],1):e._e(),e.permissions.remove?a("v-list-item",{attrs:{color:"primary"},on:{click:function(t){return e.confirmDeleteUser(s)}}},[a("v-icon",{staticClass:"ml-2",attrs:{color:"danger"}},[e._v(" mdi-trash-can-outline ")]),a("span",{staticClass:"color_danger"},[e._v(" حذف ")])],1):e._e()],1)],1)],1)]}}:null],null,!0)})],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.deleteDailog,callback:function(t){e.deleteDailog=t},expression:"deleteDailog"}},[a("v-card",{staticClass:"text-center"},[a("base-material-card",{staticClass:"pt-12",attrs:{title:"تأكيد حذف",color:"error"}},[a("v-card-text",{staticClass:"mt-2"},[e._v(" هل انت متأكد من حذف "+e._s(e.userDetails.cs_name)+" ؟ ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green",outlined:"",loading:e.loading,disabled:e.disabled},on:{click:function(t){return e.deleteUser(e.userDetails)}}},[e._v(" حذف ")]),a("v-btn",{attrs:{color:"error",outlined:""},on:{click:function(t){e.deleteDailog=!1}}},[e._v(" اغلاق ")])],1)],1)],1)],1),a("v-snackbar",{attrs:{color:"success",shaped:"",bottom:"",left:"",timeout:e.timeout},model:{value:e.successSnackbar,callback:function(t){e.successSnackbar=t},expression:"successSnackbar"}},[e._v(" "+e._s(e.successMessage)+" ")]),a("v-snackbar",{attrs:{color:"red",shaped:"",bottom:"",left:"",timeout:e.timeout},model:{value:e.errorSnackbar,callback:function(t){e.errorSnackbar=t},expression:"errorSnackbar"}},[e._v(" "+e._s(e.errorMessage)+" ")])],1)},r=[],n=a("1da1"),o=(a("96cf"),a("d81d"),a("a434"),a("0ad7")),i=o["a"].get("Customers"),c={data:function(){return{permissions:{},search:"",dataLoading:!1,page:0,total:0,numberOfPages:0,options:{},items:[],loading:!1,deleteDailog:!1,userDetails:{},editedIndex:-1,successSnackbar:!1,errorSnackbar:!1,timeout:3e3,successMessage:"",errorMessage:"",disabled:!1,headers:[{text:"أسم العميل",align:"start",sortable:!1,value:"cs_name"},{text:"نوع العميل",value:"cs_type"},{text:"الجوال/الهاتف",value:"cs_phone"},{text:"البريد الالكتروني",value:"cs_email"},{text:"الربحية",value:"color_e",class:"color_primary"},{text:"الاجراءات",value:"actions",sortable:!1}]}},computed:{},watch:{options:{handler:function(){this.fetchAllItems()}}},mounted:function(){this.permissions=this.can("العملاء")},methods:{confirmDeleteUser:function(e){this.userDetails=e,this.deleteDailog=!0},fetchAllItems:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,a=e.options,s=a.page,r=a.itemsPerPage,n=s-1,t.next=5,i.getAllItems(r,s,n);case 5:o=t.sent,console.log("Users",o),o.data.data.map((function(e){e.created_at&&(e.created_at=new Date(e.created_at).toLocaleString("ar-eg"))})),e.items=o.data.data,e.total=o.total,e.dataLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,t.disabled=!0,a.next=4,i.deleteUser(e.id);case 4:s=a.sent,!0===s.success?(t.deleteDailog=!1,t.successMessage="تم الحذف بنجاح",t.successSnackbar=!0,setTimeout((function(){t.editedIndex=t.items.indexOf(e),t.items.splice(t.editedIndex,1)}),500)):(t.errorMessage("يوجد مشكلة"),t.errorSnackbar=!0),t.disabled=!1,t.loading=!1;case 8:case"end":return a.stop()}}),a)})))()}}},l=c,d=(a("09e5"),a("2877")),u=a("6544"),m=a.n(u),p=a("8336"),v=a("b0af"),f=a("99d9"),g=a("a523"),b=a("8fea"),_=a("169a"),h=a("132d"),k=a("8860"),x=a("da13"),C=a("e449"),D=a("2db4"),w=a("2fa4"),S=Object(d["a"])(l,s,r,!1,null,null,null);t["default"]=S.exports;m()(S,{VBtn:p["a"],VCard:v["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VContainer:g["a"],VDataTable:b["a"],VDialog:_["a"],VIcon:h["a"],VList:k["a"],VListItem:x["a"],VMenu:C["a"],VSnackbar:D["a"],VSpacer:w["a"]})},7955:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1d6eb9ba.48007917.js.map