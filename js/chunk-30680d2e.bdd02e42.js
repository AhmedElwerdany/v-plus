(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30680d2e"],{4287:function(t,e,a){},"5e11":function(t,e,a){"use strict";a("4287")},b566:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("div",{staticClass:"custom-table_wrapper"},[a("h1",{staticClass:"table_title"},[t._v(" تقرير الإيرادات ")]),a("div",{staticClass:"custom-table"},[a("table",[a("thead",[a("tr",[a("th",{staticClass:"sticky-first"},[t._v(" إسم العميل ")]),t._l(t.listHeader,(function(e,n){return a("th",{key:n},[t._v(" "+t._s(e.month_name)+" ")])})),a("th",{staticClass:"sticky-last"},[t._v(" الإجمالي ")])],2)]),a("tbody",[t.loading.list?a("tr",[a("td",{staticClass:"progress-linear-table",attrs:{colspan:"14"}},[a("v-progress-linear",{attrs:{indeterminate:""}})],1)]):t._e(),t.no_items?a("tr",[a("td",[t._v(" لا يوجد عناصر ")])]):t._e(),t._l(t.list,(function(e,n){return a("tr",{key:n},[a("td",{attrs:{"data-prefix":"إسم العميل"}},[a("router-link",{attrs:{to:"/reports/revenues-report/"+e.id}},[t._v(" "+t._s(e.cs_name)+" ")])],1),t._l(e.months,(function(e,n){return a("td",{key:e.name,attrs:{"data-prefix":t.listHeader[n].month_name}},[t._v(" "+t._s(e.total||0)+" ")])})),a("td",{attrs:{"data-prefix":"الإجمالي"}},[t._v(" "+t._s(e.total||0)+" ")])],2)})),!t.no_items&&t.totalOfEveryMonth.length>0?a("tr",[a("td",{staticClass:"total-in-mobile"},[t._v(" الإجمالي ")]),t._l(t.totalOfEveryMonth.slice(0,12),(function(e,n){return a("td",{key:n,attrs:{"data-prefix":"إجمالي شهر "+t.listHeader[n].month_name}},[t._v(" "+t._s(e)+" ")])})),a("td",{attrs:{"data-prefix":"إجمالي كل الشهور"}},[t._v(" "+t._s(t.totalOfEveryMonth[12])+" ")])],2):t._e()],2)])]),a("div",{staticClass:"v-data-footer custom-table_footer"},[a("div",{staticClass:"actions"},[a("v-btn",{attrs:{icon:"",text:"",title:"الصفحة التالية",disabled:-1===t.page.next_page},on:{click:function(e){return t.changePage(1)}}},[a("i",{staticClass:"v-icon notranslate mdi mdi-chevron-left theme--light"})]),a("v-btn",{staticClass:"prev-button",attrs:{icon:"",text:"",title:"الصفحة السابقه",disabled:1===t.page.current},on:{click:function(e){return t.changePage(-1)}}},[a("i",{staticClass:"v-icon notranslate mdi mdi-chevron-right theme--light"})])],1),a("div",{staticClass:"pages_numbers"},[t._v(" "+t._s(t.page_number_text)+" ")])])])])},r=[],s=a("5530"),i=a("1da1"),o=(a("96cf"),a("dca8"),a("a15b"),a("d81d"),a("d3b7"),a("cb29"),a("ac1f"),a("5319"),a("0ad7")),l=o["a"].get("revenuesReport"),c={name:"ListRevenues",data:function(){return{loading:{list:!1},listHeader:Object.freeze([{month_name:"يناير"},{month_name:"فبراير"},{month_name:"مارس"},{month_name:"إبريل"},{month_name:"مايو"},{month_name:"يونيو"},{month_name:"يوليو"},{month_name:"أغسطس"},{month_name:"سبتمبر"},{month_name:"أكتوبر"},{month_name:"نوافمبر"},{month_name:"ديسمبر"}]),list:[],totalOfEveryMonth:[],page:{current:1,total:0,items:0,next_page:1}}},computed:{page_number_text:function(){return this.page.items>0?[this.page.current,"-",this.page.items," من ",this.page.total].join(""):""},no_items:function(){return!this.loading.list&&0===this.list.length}},mounted:function(){this.page.current=+this.$route.query.page||1,this.fetchAll({page:this.page.current})},methods:{fetchAll:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading.list=!0,a.next=3,l.getAllItems(t);case 3:n=a.sent,r=n.data,s=r.data,i=r.total,o=r.next_page,e.page.total=i,e.page.items=s.length||0,e.page.next_page=o,e.list=e.addTotalToList(s),e.totalOfEveryMonth=e.calcTotalOfEveryMonth(e.list),console.log(e.totalOfEveryMonth),e.loading.list=!1;case 15:case"end":return a.stop()}}),a)})))()},addTotalToList:function(t){return t.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{total:t.months.reduce((function(t,e){return t+ +e.total}),0)})}))},calcTotalOfEveryMonth:function(t){for(var e=new Array(13).fill(0),a=12,n=0;n<t.length;n++){for(var r=0;r<a;r++)e[r]+=+t[n].months[r].total;e[a]+=+t[n].total}return console.log(e),e},changePage:function(t){this.page.current=+this.page.current+t,this.$router.replace({query:{page:this.page.current}}),this.fetchAll({page:this.page.current})}}},u=c,h=(a("5e11"),a("2877")),m=a("6544"),d=a.n(m),_=a("8336"),g=a("a523"),p=a("8e36"),f=Object(h["a"])(u,n,r,!1,null,"21000d97",null);e["default"]=f.exports;d()(f,{VBtn:_["a"],VContainer:g["a"],VProgressLinear:p["a"]})}}]);
//# sourceMappingURL=chunk-30680d2e.bdd02e42.js.map